<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cuaca Jawa Timur (Real-Time)</title>
<style>
  body { font-family:Arial, sans-serif; background:#0f172a; color:#e6eef6; margin:0; padding:20px; }
  .container { max-width:700px; margin:auto; background:#1e293b; border-radius:12px; padding:20px; box-shadow:0 0 20px rgba(0,0,0,0.3); }
  h1 { margin-top:0; color:#60a5fa; }
  select,button { padding:10px; border:none; border-radius:8px; margin:5px 0; }
  select { width:100%; background:#334155; color:#fff; }
  button { background:#3b82f6; color:#fff; cursor:pointer; }
  button:hover { background:#2563eb; }
  .forecast { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:10px; margin-top:15px; }
  .day { background:#334155; border-radius:10px; padding:10px; text-align:center; }
  footer { text-align:center; margin-top:15px; color:#94a3b8; font-size:12px; }
</style>
</head>
<body>
<div class="container">
  <h1>üå§Ô∏è Cuaca Jawa Timur (Real-Time)</h1>
  <p>Pilih kota untuk melihat prakiraan cuaca 3 hari ke depan (OpenWeatherMap).</p>
  <select id="kota">
    <option value="">‚Äî Pilih Kota ‚Äî</option>
    <option>Kediri</option>
    <option>Malang</option>
    <option>Jombang</option>
    <option>Tulungagung</option>
    <option>Trenggalek</option>
    <option>Blitar</option>
    <option>Mojokerto</option>
    <option>Surabaya</option>
    <option>Sidoarjo</option>
    <option>Probolinggo</option>
    <option>Bojonegoro</option>
    <option>Madiun</option>
    <option>Lamongan</option>
    <option>Jember</option>
    <option>Banyuwangi</option>
    <option>Ponorogo</option>
  </select>
  <button onclick="getWeather()">Lihat Cuaca</button>

  <div id="hasil"></div>

  <footer>Data real-time ¬© OpenWeatherMap</footer>
</div>

<script>
const API_KEY = "c83109cbf1b220f3f5355debc389e2fa"; // gunakan API key kamu
async function getWeather(){
  const kota = document.getElementById("kota").value;
  const hasil = document.getElementById("hasil");
  if(!kota){ hasil.innerHTML = "<p>‚ö†Ô∏è Silakan pilih kota dulu.</p>"; return; }

  hasil.innerHTML = "üîÑ Mengambil data cuaca...";
  try {
    // ambil koordinat kota
    const geo = await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(kota)},ID&limit=1&appid=${API_KEY}`);
    const [loc] = await geo.json();
    if(!loc){ hasil.innerHTML = "‚ùå Lokasi tidak ditemukan."; return; }

    // ambil prakiraan cuaca 3 hari ke depan
    const lat = loc.lat, lon = loc.lon;
    const res = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=id`);
    const data = await res.json();

    const daily = [];
    for(let i=0; i<data.list.length; i+=8){ // setiap 24 jam (8x3jam)
      const d = data.list[i];
      const date = new Date(d.dt * 1000);
      daily.push({
        date: date.toLocaleDateString('id-ID',{weekday:'short',day:'numeric',month:'short'}),
        temp: d.main.temp.toFixed(1),
        desc: d.weather[0].description,
        icon: d.weather[0].icon
      });
      if(daily.length === 3) break;
    }

    let html = `<h2>${kota}</h2><div class="forecast">`;
    daily.forEach(d=>{
      html += `
        <div class="day">
          <div>${d.date}</div>
          <img src="https://openweathermap.org/img/wn/${d.icon}@2x.png" alt="" width="60">
          <div><strong>${d.temp}¬∞C</strong></div>
          <div>${d.desc}</div>
        </div>`;
    });
    html += "</div>";
    hasil.innerHTML = html;
  } catch (e) {
    hasil.innerHTML = "‚ùå Gagal mengambil data cuaca.";
    console.error(e);
  }
}
</script>
</body>
</html>
